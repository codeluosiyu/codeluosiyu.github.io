(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{466:function(e,a,t){"use strict";t.r(a);var r=t(25),s=Object(r.a)({},(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"æµè§ˆå™¨ç¼“å­˜æœºåˆ¶ä»‹ç»ä¸ç¼“å­˜ç­–ç•¥å‰–æ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æµè§ˆå™¨ç¼“å­˜æœºåˆ¶ä»‹ç»ä¸ç¼“å­˜ç­–ç•¥å‰–æ"}},[e._v("#")]),e._v(" æµè§ˆå™¨ç¼“å­˜æœºåˆ¶ä»‹ç»ä¸ç¼“å­˜ç­–ç•¥å‰–æ")]),e._v(" "),t("p",[e._v("ç¼“å­˜å¯ä»¥å‡å°‘ç½‘ç»œ IO æ¶ˆè€—ï¼Œæé«˜è®¿é—®é€Ÿåº¦ã€‚æµè§ˆå™¨ç¼“å­˜æ˜¯ä¸€ç§æ“ä½œç®€å•ã€æ•ˆæœæ˜¾è‘—çš„å‰ç«¯æ€§èƒ½ä¼˜åŒ–æ‰‹æ®µã€‚å¯¹äºè¿™ä¸ªæ“ä½œçš„å¿…è¦æ€§ï¼ŒChrome å®˜æ–¹ç»™å‡ºçš„è§£é‡Šä¼¼ä¹æ›´æœ‰è¯´æœåŠ›ä¸€äº›ï¼š")]),e._v(" "),t("blockquote",[t("p",[e._v("é€šè¿‡ç½‘ç»œè·å–å†…å®¹æ—¢é€Ÿåº¦ç¼“æ…¢åˆå¼€é”€å·¨å¤§ã€‚è¾ƒå¤§çš„å“åº”éœ€è¦åœ¨å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´è¿›è¡Œå¤šæ¬¡å¾€è¿”é€šä¿¡ï¼Œè¿™ä¼šå»¶è¿Ÿæµè§ˆå™¨è·å¾—å’Œå¤„ç†å†…å®¹çš„æ—¶é—´ï¼Œè¿˜ä¼šå¢åŠ è®¿é—®è€…çš„æµé‡è´¹ç”¨ã€‚å› æ­¤ï¼Œç¼“å­˜å¹¶é‡å¤åˆ©ç”¨ä¹‹å‰è·å–çš„èµ„æºçš„èƒ½åŠ›æˆä¸ºæ€§èƒ½ä¼˜åŒ–çš„ä¸€ä¸ªå…³é”®æ–¹é¢ã€‚")])]),e._v(" "),t("p",[e._v("å¾ˆå¤šæ—¶å€™ï¼Œå¤§å®¶å€¾å‘äºå°†æµè§ˆå™¨ç¼“å­˜ç®€å•åœ°ç†è§£ä¸ºâ€œHTTP ç¼“å­˜â€ã€‚ä½†äº‹å®ä¸Šï¼Œæµè§ˆå™¨ç¼“å­˜æœºåˆ¶æœ‰å››ä¸ªæ–¹é¢ï¼Œå®ƒä»¬æŒ‰ç…§è·å–èµ„æºæ—¶è¯·æ±‚çš„ä¼˜å…ˆçº§ä¾æ¬¡æ’åˆ—å¦‚ä¸‹ï¼š")]),e._v(" "),t("ol",[t("li",[e._v("Memory Cache")]),e._v(" "),t("li",[e._v("Service Worker Cache")]),e._v(" "),t("li",[e._v("HTTP Cache")]),e._v(" "),t("li",[e._v("Push Cache")])]),e._v(" "),t("p",[e._v("å¤§å®¶å¯¹ HTTP Cacheï¼ˆå³ Cache-Controlã€expires ç­‰å­—æ®µæ§åˆ¶çš„ç¼“å­˜ï¼‰åº”è¯¥æ¯”è¾ƒç†Ÿæ‚‰ï¼Œå¦‚æœå¯¹å…¶å®ƒå‡ ç§ç¼“å­˜å¯èƒ½è¿˜æ²¡ä»€ä¹ˆæ¦‚å¿µï¼Œæˆ‘ä»¬å¯ä»¥å…ˆæ¥çœ‹ä¸€å¼ çº¿ä¸Šç½‘ç«™çš„ Network é¢æ¿æˆªå›¾ï¼š")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/9/20/165f714800e5be49?w=2774&h=676&f=png&s=432948",alt:""}})]),e._v(" "),t("p",[e._v("æˆ‘ä»¬ç»™ size è¿™ä¸€æ ä¸€ä¸ªç‰¹å†™ï¼š")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/9/20/165f715425bd73b6?w=186&h=440&f=png&s=33574",alt:""}})]),e._v(" "),t("p",[e._v("å¤§å®¶æ³¨æ„ä¸€ä¸‹éæ•°å­—â€”â€”å³å½¢å¦‚â€œï¼ˆfrom xxxï¼‰â€è¿™æ ·çš„æè¿°â€”â€”å¯¹åº”çš„èµ„æºï¼Œè¿™äº›èµ„æºå°±æ˜¯æˆ‘ä»¬é€šè¿‡ç¼“å­˜è·å–åˆ°çš„ã€‚å…¶ä¸­ï¼Œâ€œfrom memory cacheâ€å¯¹æ ‡åˆ° Memory Cache ç±»å‹ï¼Œâ€œfrom ServiceWorkerâ€å¯¹æ ‡åˆ° Service Worker Cache ç±»å‹ã€‚è‡³äº Push Cacheï¼Œè¿™ä¸ªæ¯”è¾ƒç‰¹æ®Šï¼Œæ˜¯ HTTP2 çš„æ–°ç‰¹æ€§ã€‚")]),e._v(" "),t("p",[e._v("æœ¬èŠ‚å°†ä¼šé’ˆå¯¹è¿™å››ä¸ªæ–¹é¢å„ä¸ªå‡»ç ´ã€‚è€ƒè™‘åˆ° HTTP ç¼“å­˜æ˜¯æœ€ä¸»è¦ã€æœ€å…·æœ‰ä»£è¡¨æ€§çš„ç¼“å­˜ç­–ç•¥ï¼Œä¹Ÿæ˜¯æ¯ä¸€ä½å‰ç«¯å·¥ç¨‹å¸ˆéƒ½åº”è¯¥æ·±åˆ»ç†è§£æŒæ¡çš„æ€§èƒ½ä¼˜åŒ–çŸ¥è¯†ç‚¹ï¼Œæˆ‘ä»¬ä¸‹é¢ä¼˜å…ˆé’ˆå¯¹ HTTP ç¼“å­˜æœºåˆ¶è¿›è¡Œå‰–æã€‚")]),e._v(" "),t("h2",{attrs:{id:"http-ç¼“å­˜æœºåˆ¶æ¢ç§˜"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#http-ç¼“å­˜æœºåˆ¶æ¢ç§˜"}},[e._v("#")]),e._v(" HTTP ç¼“å­˜æœºåˆ¶æ¢ç§˜")]),e._v(" "),t("p",[e._v("HTTP ç¼“å­˜æ˜¯æˆ‘ä»¬æ—¥å¸¸å¼€å‘ä¸­æœ€ä¸ºç†Ÿæ‚‰çš„ä¸€ç§ç¼“å­˜æœºåˆ¶ã€‚å®ƒåˆåˆ†ä¸º"),t("strong",[e._v("å¼ºç¼“å­˜")]),e._v("å’Œ"),t("strong",[e._v("åå•†ç¼“å­˜")]),e._v("ã€‚ä¼˜å…ˆçº§è¾ƒé«˜çš„æ˜¯å¼ºç¼“å­˜ï¼Œåœ¨å‘½ä¸­å¼ºç¼“å­˜å¤±è´¥çš„æƒ…å†µä¸‹ï¼Œæ‰ä¼šèµ°åå•†ç¼“å­˜ã€‚")]),e._v(" "),t("h3",{attrs:{id:"å¼ºç¼“å­˜çš„ç‰¹å¾"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å¼ºç¼“å­˜çš„ç‰¹å¾"}},[e._v("#")]),e._v(" å¼ºç¼“å­˜çš„ç‰¹å¾")]),e._v(" "),t("p",[e._v("å¼ºç¼“å­˜æ˜¯åˆ©ç”¨ http å¤´ä¸­çš„ Expires å’Œ Cache-Control ä¸¤ä¸ªå­—æ®µæ¥æ§åˆ¶çš„ã€‚å¼ºç¼“å­˜ä¸­ï¼Œå½“è¯·æ±‚å†æ¬¡å‘å‡ºæ—¶ï¼Œæµè§ˆå™¨ä¼šæ ¹æ®å…¶ä¸­çš„ expires å’Œ cache-control åˆ¤æ–­ç›®æ ‡èµ„æºæ˜¯å¦â€œå‘½ä¸­â€å¼ºç¼“å­˜ï¼Œè‹¥å‘½ä¸­åˆ™ç›´æ¥ä»ç¼“å­˜ä¸­è·å–èµ„æºï¼Œ"),t("strong",[e._v("ä¸ä¼šå†ä¸æœåŠ¡ç«¯å‘ç”Ÿé€šä¿¡ã€‚")])]),e._v(" "),t("p",[e._v("å‘½ä¸­å¼ºç¼“å­˜çš„æƒ…å†µä¸‹ï¼Œè¿”å›çš„ HTTP çŠ¶æ€ç ä¸º 200 ï¼ˆå¦‚ä¸‹å›¾ï¼‰ã€‚")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/9/20/165f6a683fc021e1?w=660&h=100&f=png&s=15006",alt:""}})]),e._v(" "),t("h3",{attrs:{id:"å¼ºç¼“å­˜çš„å®ç°-ä»-expires-åˆ°-cache-control"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å¼ºç¼“å­˜çš„å®ç°-ä»-expires-åˆ°-cache-control"}},[e._v("#")]),e._v(" å¼ºç¼“å­˜çš„å®ç°ï¼šä» expires åˆ° cache-control")]),e._v(" "),t("p",[e._v("å®ç°å¼ºç¼“å­˜ï¼Œè¿‡å»æˆ‘ä»¬ä¸€ç›´ç”¨ "),t("code",[e._v("expires")]),e._v("ã€‚"),t("br"),e._v("\nå½“æœåŠ¡å™¨è¿”å›å“åº”æ—¶ï¼Œåœ¨ Response Headers ä¸­å°†è¿‡æœŸæ—¶é—´å†™å…¥ expires å­—æ®µã€‚åƒè¿™æ ·ï¼š")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/9/20/165f52bf6e844b85?w=710&h=388&f=png&s=67960",alt:""}})]),e._v(" "),t("p",[e._v("æˆ‘ä»¬ç»™ expires ä¸€ä¸ªç‰¹å†™ï¼š")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("expires: Wed, 11 Sep 2019 16:12:18 GMT\n\n")])])]),t("p",[e._v("å¯ä»¥çœ‹åˆ°ï¼Œexpires æ˜¯ä¸€ä¸ªæ—¶é—´æˆ³ï¼Œæ¥ä¸‹æ¥å¦‚æœæˆ‘ä»¬è¯•å›¾å†æ¬¡å‘æœåŠ¡å™¨è¯·æ±‚èµ„æºï¼Œæµè§ˆå™¨å°±ä¼šå…ˆå¯¹æ¯”æœ¬åœ°æ—¶é—´å’Œ expires çš„æ—¶é—´æˆ³ï¼Œå¦‚æœæœ¬åœ°æ—¶é—´å°äº expires è®¾å®šçš„è¿‡æœŸæ—¶é—´ï¼Œé‚£ä¹ˆå°±ç›´æ¥å»ç¼“å­˜ä¸­å–è¿™ä¸ªèµ„æºã€‚")]),e._v(" "),t("p",[e._v("ä»è¿™æ ·çš„æè¿°ä¸­å¤§å®¶ä¹Ÿä¸éš¾çŒœæµ‹ï¼Œexpires æ˜¯æœ‰é—®é¢˜çš„ï¼Œå®ƒæœ€å¤§çš„é—®é¢˜åœ¨äºå¯¹â€œæœ¬åœ°æ—¶é—´â€çš„ä¾èµ–ã€‚å¦‚æœæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯çš„æ—¶é—´è®¾ç½®å¯èƒ½ä¸åŒï¼Œæˆ–è€…æˆ‘ç›´æ¥æ‰‹åŠ¨å»æŠŠå®¢æˆ·ç«¯çš„æ—¶é—´æ”¹æ‰ï¼Œé‚£ä¹ˆ expires å°†æ— æ³•è¾¾åˆ°æˆ‘ä»¬çš„é¢„æœŸã€‚")]),e._v(" "),t("p",[e._v("è€ƒè™‘åˆ° expires çš„å±€é™æ€§ï¼ŒHTTP1.1 æ–°å¢äº† "),t("code",[e._v("Cache-Control")]),e._v(" å­—æ®µæ¥å®Œæˆ expires çš„ä»»åŠ¡ã€‚"),t("br"),e._v("\nexpires èƒ½åšçš„äº‹æƒ…ï¼ŒCache-Control éƒ½èƒ½åšï¼›expires å®Œæˆä¸äº†çš„äº‹æƒ…ï¼ŒCache-Control ä¹Ÿèƒ½åšã€‚å› æ­¤ï¼ŒCache-Control å¯ä»¥è§†ä½œæ˜¯ expires çš„"),t("strong",[e._v("å®Œå…¨æ›¿ä»£æ–¹æ¡ˆ")]),e._v("ã€‚åœ¨å½“ä¸‹çš„å‰ç«¯å®è·µé‡Œï¼Œæˆ‘ä»¬ç»§ç»­ä½¿ç”¨ expires çš„å”¯ä¸€ç›®çš„å°±æ˜¯"),t("strong",[e._v("å‘ä¸‹å…¼å®¹")]),e._v("ã€‚")]),e._v(" "),t("p",[e._v("ç°åœ¨æˆ‘ä»¬ç»™ Cache-Control å­—æ®µä¸€ä¸ªç‰¹å†™ï¼š")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("cache-control: max-age=31536000\n\n")])])]),t("p",[e._v("å¦‚å¤§å®¶æ‰€è§ï¼Œåœ¨ Cache-Control ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ "),t("code",[e._v("max-age")]),e._v(" æ¥æ§åˆ¶èµ„æºçš„æœ‰æ•ˆæœŸã€‚max-age ä¸æ˜¯ä¸€ä¸ªæ—¶é—´æˆ³ï¼Œè€Œæ˜¯ä¸€ä¸ªæ—¶é—´é•¿åº¦ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œmax-age æ˜¯ 31536000 ç§’ï¼Œå®ƒæ„å‘³ç€è¯¥èµ„æºåœ¨ 31536000 ç§’ä»¥å†…éƒ½æ˜¯æœ‰æ•ˆçš„ï¼Œå®Œç¾åœ°è§„é¿äº†æ—¶é—´æˆ³å¸¦æ¥çš„æ½œåœ¨é—®é¢˜ã€‚")]),e._v(" "),t("p",[t("strong",[e._v("Cache-Control ç›¸å¯¹äº expires æ›´åŠ å‡†ç¡®ï¼Œå®ƒçš„ä¼˜å…ˆçº§ä¹Ÿæ›´é«˜ã€‚å½“ Cache-Control ä¸ expires åŒæ—¶å‡ºç°æ—¶ï¼Œæˆ‘ä»¬ä»¥ Cache-Control ä¸ºå‡†ã€‚")])]),e._v(" "),t("h3",{attrs:{id:"cache-control-åº”ç”¨åˆ†æ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cache-control-åº”ç”¨åˆ†æ"}},[e._v("#")]),e._v(" Cache-Control åº”ç”¨åˆ†æ")]),e._v(" "),t("p",[e._v("Cache-Control çš„ç¥é€šï¼Œå¯ä¸æ­¢äºè¿™ä¸€ä¸ªå°å°çš„ max-ageã€‚å¦‚ä¸‹çš„ç”¨æ³•ä¹Ÿéå¸¸å¸¸è§ï¼š")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("cache-control: max-age=3600, s-maxage=31536000\n\n")])])]),t("p",[t("strong",[e._v("s-maxage ä¼˜å…ˆçº§é«˜äº max-ageï¼Œä¸¤è€…åŒæ—¶å‡ºç°æ—¶ï¼Œä¼˜å…ˆè€ƒè™‘ s-maxageã€‚å¦‚æœ s-maxage æœªè¿‡æœŸï¼Œåˆ™å‘ä»£ç†æœåŠ¡å™¨è¯·æ±‚å…¶ç¼“å­˜å†…å®¹ã€‚")])]),e._v(" "),t("p",[e._v("è¿™ä¸ª s-maxage ä¸åƒ max-age ä¸€æ ·ä¸ºå¤§å®¶æ‰€ç†ŸçŸ¥ã€‚çš„ç¡®ï¼Œåœ¨é¡¹ç›®ä¸æ˜¯ç‰¹åˆ«å¤§çš„åœºæ™¯ä¸‹ï¼Œmax-age è¶³å¤Ÿç”¨äº†ã€‚ä½†åœ¨ä¾èµ–å„ç§"),t("strong",[e._v("ä»£ç†")]),e._v("çš„å¤§å‹æ¶æ„ä¸­ï¼Œæˆ‘ä»¬ä¸å¾—ä¸è€ƒè™‘"),t("strong",[e._v("ä»£ç†æœåŠ¡å™¨")]),e._v("çš„ç¼“å­˜é—®é¢˜ã€‚s-maxage å°±æ˜¯ç”¨äºè¡¨ç¤º cache æœåŠ¡å™¨ä¸Šï¼ˆæ¯”å¦‚ cache CDNï¼‰çš„ç¼“å­˜çš„æœ‰æ•ˆæ—¶é—´çš„ï¼Œå¹¶åªå¯¹ public ç¼“å­˜æœ‰æ•ˆã€‚")]),e._v(" "),t("p",[e._v("(10.24æ™šæ›´æ–°ã€‚æ„Ÿè°¢è¯„è®ºåŒº@æ•–å¤©ç¾½çš„è¡¥å……ï¼Œæ­¤å¤„åº”æ³¨æ„è¿™æ ·ä¸€ä¸ªç»†èŠ‚ï¼šs-maxageä»…åœ¨ä»£ç†æœåŠ¡å™¨ä¸­ç”Ÿæ•ˆï¼Œå®¢æˆ·ç«¯ä¸­æˆ‘ä»¬åªè€ƒè™‘max-ageã€‚)")]),e._v(" "),t("p",[e._v("é‚£ä¹ˆä»€ä¹ˆæ˜¯ public ç¼“å­˜å‘¢ï¼Ÿè¯´åˆ°è¿™é‡Œï¼ŒCache-Control ä¸­æœ‰ä¸€äº›é€‚åˆæ”¾åœ¨ä¸€èµ·ç†è§£çš„çŸ¥è¯†ç‚¹ï¼Œæˆ‘ä»¬é›†ä¸­æ¢³ç†ä¸€ä¸‹ï¼š")]),e._v(" "),t("h4",{attrs:{id:"public-ä¸-private"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#public-ä¸-private"}},[e._v("#")]),e._v(" public ä¸ private")]),e._v(" "),t("p",[e._v("public ä¸ private æ˜¯é’ˆå¯¹èµ„æºæ˜¯å¦èƒ½å¤Ÿè¢«ä»£ç†æœåŠ¡ç¼“å­˜è€Œå­˜åœ¨çš„ä¸€ç»„å¯¹ç«‹æ¦‚å¿µã€‚")]),e._v(" "),t("p",[e._v("å¦‚æœæˆ‘ä»¬ä¸ºèµ„æºè®¾ç½®äº† publicï¼Œé‚£ä¹ˆå®ƒæ—¢å¯ä»¥è¢«æµè§ˆå™¨ç¼“å­˜ï¼Œä¹Ÿå¯ä»¥è¢«ä»£ç†æœåŠ¡å™¨ç¼“å­˜ï¼›å¦‚æœæˆ‘ä»¬è®¾ç½®äº† privateï¼Œåˆ™è¯¥èµ„æºåªèƒ½è¢«æµè§ˆå™¨ç¼“å­˜ã€‚private ä¸º"),t("strong",[e._v("é»˜è®¤å€¼")]),e._v("ã€‚ä½†å¤šæ•°æƒ…å†µä¸‹ï¼Œpublic å¹¶ä¸éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨è®¾ç½®ï¼Œæ¯”å¦‚æœ‰å¾ˆå¤šçº¿ä¸Šç½‘ç«™çš„ cache-control æ˜¯è¿™æ ·çš„ï¼š")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/9/20/165f6029fc74bbc6?w=756&h=256&f=png&s=40662",alt:""}})]),e._v(" "),t("p",[e._v("è®¾ç½®äº† s-maxageï¼Œæ²¡è®¾ç½® publicï¼Œé‚£ä¹ˆ CDN è¿˜å¯ä»¥ç¼“å­˜è¿™ä¸ªèµ„æºå—ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ã€‚å› ä¸ºæ˜ç¡®çš„ç¼“å­˜ä¿¡æ¯ï¼ˆä¾‹å¦‚â€œmax-ageâ€ï¼‰å·²è¡¨ç¤ºå“åº”æ˜¯å¯ä»¥ç¼“å­˜çš„ã€‚")]),e._v(" "),t("h4",{attrs:{id:"no-storeä¸no-cache"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#no-storeä¸no-cache"}},[e._v("#")]),e._v(" no-storeä¸no-cache")]),e._v(" "),t("p",[e._v("no-cache ç»•å¼€äº†æµè§ˆå™¨ï¼šæˆ‘ä»¬ä¸ºèµ„æºè®¾ç½®äº† no-cache åï¼Œæ¯ä¸€æ¬¡å‘èµ·è¯·æ±‚éƒ½ä¸ä¼šå†å»è¯¢é—®æµè§ˆå™¨çš„ç¼“å­˜æƒ…å†µï¼Œè€Œæ˜¯ç›´æ¥å‘æœåŠ¡ç«¯å»ç¡®è®¤è¯¥èµ„æºæ˜¯å¦è¿‡æœŸï¼ˆå³èµ°æˆ‘ä»¬ä¸‹æ–‡å³å°†è®²è§£çš„åå•†ç¼“å­˜çš„è·¯çº¿ï¼‰ã€‚")]),e._v(" "),t("p",[e._v("no-store æ¯”è¾ƒç»æƒ…ï¼Œé¡¾åæ€ä¹‰å°±æ˜¯ä¸ä½¿ç”¨ä»»ä½•ç¼“å­˜ç­–ç•¥ã€‚åœ¨ no-cache çš„åŸºç¡€ä¸Šï¼Œå®ƒè¿æœåŠ¡ç«¯çš„ç¼“å­˜ç¡®è®¤ä¹Ÿç»•å¼€äº†ï¼Œåªå…è®¸ä½ ç›´æ¥å‘æœåŠ¡ç«¯å‘é€è¯·æ±‚ã€å¹¶ä¸‹è½½å®Œæ•´çš„å“åº”ã€‚")]),e._v(" "),t("h3",{attrs:{id:"åå•†ç¼“å­˜-æµè§ˆå™¨ä¸æœåŠ¡å™¨åˆä½œä¹‹ä¸‹çš„ç¼“å­˜ç­–ç•¥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#åå•†ç¼“å­˜-æµè§ˆå™¨ä¸æœåŠ¡å™¨åˆä½œä¹‹ä¸‹çš„ç¼“å­˜ç­–ç•¥"}},[e._v("#")]),e._v(" åå•†ç¼“å­˜ï¼šæµè§ˆå™¨ä¸æœåŠ¡å™¨åˆä½œä¹‹ä¸‹çš„ç¼“å­˜ç­–ç•¥")]),e._v(" "),t("p",[e._v("åå•†ç¼“å­˜ä¾èµ–äºæœåŠ¡ç«¯ä¸æµè§ˆå™¨ä¹‹é—´çš„é€šä¿¡ã€‚")]),e._v(" "),t("p",[e._v("åå•†ç¼“å­˜æœºåˆ¶ä¸‹ï¼Œæµè§ˆå™¨éœ€è¦å‘æœåŠ¡å™¨å»è¯¢é—®ç¼“å­˜çš„ç›¸å…³ä¿¡æ¯ï¼Œè¿›è€Œåˆ¤æ–­æ˜¯é‡æ–°å‘èµ·è¯·æ±‚ã€ä¸‹è½½å®Œæ•´çš„å“åº”ï¼Œè¿˜æ˜¯ä»æœ¬åœ°è·å–ç¼“å­˜çš„èµ„æºã€‚")]),e._v(" "),t("p",[e._v("å¦‚æœæœåŠ¡ç«¯æç¤ºç¼“å­˜èµ„æºæœªæ”¹åŠ¨ï¼ˆNot Modifiedï¼‰ï¼Œèµ„æºä¼šè¢«"),t("strong",[e._v("é‡å®šå‘")]),e._v("åˆ°æµè§ˆå™¨ç¼“å­˜ï¼Œ"),t("strong",[e._v("è¿™ç§æƒ…å†µä¸‹ç½‘ç»œè¯·æ±‚å¯¹åº”çš„çŠ¶æ€ç æ˜¯ 304")]),e._v("ï¼ˆå¦‚ä¸‹å›¾ï¼‰ã€‚")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/9/20/165f6a6d6ffd4cc2?w=710&h=100&f=png&s=15810",alt:""}})]),e._v(" "),t("h3",{attrs:{id:"åå•†ç¼“å­˜çš„å®ç°-ä»-last-modified-åˆ°-etag"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#åå•†ç¼“å­˜çš„å®ç°-ä»-last-modified-åˆ°-etag"}},[e._v("#")]),e._v(" åå•†ç¼“å­˜çš„å®ç°ï¼šä» Last-Modified åˆ° Etag")]),e._v(" "),t("p",[e._v("Last-Modified æ˜¯ä¸€ä¸ªæ—¶é—´æˆ³ï¼Œå¦‚æœæˆ‘ä»¬å¯ç”¨äº†åå•†ç¼“å­˜ï¼Œå®ƒä¼šåœ¨é¦–æ¬¡è¯·æ±‚æ—¶éšç€ Response Headers è¿”å›ï¼š")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("Last-Modified: Fri, 27 Oct 2017 06:35:57 GMT\n\n")])])]),t("p",[e._v("éšåæˆ‘ä»¬æ¯æ¬¡è¯·æ±‚æ—¶ï¼Œä¼šå¸¦ä¸Šä¸€ä¸ªå« If-Modified-Since çš„æ—¶é—´æˆ³å­—æ®µï¼Œå®ƒçš„å€¼æ­£æ˜¯ä¸Šä¸€æ¬¡ response è¿”å›ç»™å®ƒçš„ last-modified å€¼ï¼š")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("If-Modified-Since: Fri, 27 Oct 2017 06:35:57 GMT\n\n")])])]),t("p",[e._v("æœåŠ¡å™¨æ¥æ”¶åˆ°è¿™ä¸ªæ—¶é—´æˆ³åï¼Œä¼šæ¯”å¯¹è¯¥æ—¶é—´æˆ³å’Œèµ„æºåœ¨æœåŠ¡å™¨ä¸Šçš„æœ€åä¿®æ”¹æ—¶é—´æ˜¯å¦ä¸€è‡´ï¼Œä»è€Œåˆ¤æ–­èµ„æºæ˜¯å¦å‘ç”Ÿäº†å˜åŒ–ã€‚å¦‚æœå‘ç”Ÿäº†å˜åŒ–ï¼Œå°±ä¼šè¿”å›ä¸€ä¸ªå®Œæ•´çš„å“åº”å†…å®¹ï¼Œå¹¶åœ¨ Response Headers ä¸­æ·»åŠ æ–°çš„ Last-Modified å€¼ï¼›å¦åˆ™ï¼Œè¿”å›å¦‚ä¸Šå›¾çš„ 304 å“åº”ï¼ŒResponse Headers ä¸ä¼šå†æ·»åŠ  Last-Modified å­—æ®µã€‚")]),e._v(" "),t("p",[e._v("ä½¿ç”¨ Last-Modified å­˜åœ¨ä¸€äº›å¼Šç«¯ï¼Œè¿™å…¶ä¸­æœ€å¸¸è§çš„å°±æ˜¯è¿™æ ·ä¸¤ä¸ªåœºæ™¯ï¼š")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("æˆ‘ä»¬ç¼–è¾‘äº†æ–‡ä»¶ï¼Œä½†æ–‡ä»¶çš„å†…å®¹æ²¡æœ‰æ”¹å˜ã€‚æœåŠ¡ç«¯å¹¶ä¸æ¸…æ¥šæˆ‘ä»¬æ˜¯å¦çœŸæ­£æ”¹å˜äº†æ–‡ä»¶ï¼Œå®ƒä»ç„¶é€šè¿‡æœ€åç¼–è¾‘æ—¶é—´è¿›è¡Œåˆ¤æ–­ã€‚å› æ­¤è¿™ä¸ªèµ„æºåœ¨å†æ¬¡è¢«è¯·æ±‚æ—¶ï¼Œä¼šè¢«å½“åšæ–°èµ„æºï¼Œè¿›è€Œå¼•å‘ä¸€æ¬¡å®Œæ•´çš„å“åº”â€”â€”ä¸è¯¥é‡æ–°è¯·æ±‚çš„æ—¶å€™ï¼Œä¹Ÿä¼šé‡æ–°è¯·æ±‚ã€‚")])]),e._v(" "),t("li",[t("p",[e._v("å½“æˆ‘ä»¬ä¿®æ”¹æ–‡ä»¶çš„é€Ÿåº¦è¿‡å¿«æ—¶ï¼ˆæ¯”å¦‚èŠ±äº† 100ms å®Œæˆäº†æ”¹åŠ¨ï¼‰ï¼Œç”±äº If-Modified-Since åªèƒ½æ£€æŸ¥åˆ°ä»¥ç§’ä¸ºæœ€å°è®¡é‡å•ä½çš„æ—¶é—´å·®ï¼Œæ‰€ä»¥å®ƒæ˜¯æ„ŸçŸ¥ä¸åˆ°è¿™ä¸ªæ”¹åŠ¨çš„â€”â€”è¯¥é‡æ–°è¯·æ±‚çš„æ—¶å€™ï¼Œåè€Œæ²¡æœ‰é‡æ–°è¯·æ±‚äº†ã€‚")])])]),e._v(" "),t("p",[e._v("è¿™ä¸¤ä¸ªåœºæ™¯å…¶å®æŒ‡å‘äº†åŒä¸€ä¸ª bugâ€”â€”æœåŠ¡å™¨å¹¶æ²¡æœ‰æ­£ç¡®æ„ŸçŸ¥æ–‡ä»¶çš„å˜åŒ–ã€‚ä¸ºäº†è§£å†³è¿™æ ·çš„é—®é¢˜ï¼ŒEtag ä½œä¸º Last-Modified çš„è¡¥å……å‡ºç°äº†ã€‚")]),e._v(" "),t("p",[e._v("Etag æ˜¯ç”±æœåŠ¡å™¨ä¸ºæ¯ä¸ªèµ„æºç”Ÿæˆçš„å”¯ä¸€çš„"),t("strong",[e._v("æ ‡è¯†å­—ç¬¦ä¸²")]),e._v("ï¼Œè¿™ä¸ªæ ‡è¯†å­—ç¬¦ä¸²æ˜¯åŸºäºæ–‡ä»¶å†…å®¹ç¼–ç çš„ï¼Œåªè¦æ–‡ä»¶å†…å®¹ä¸åŒï¼Œå®ƒä»¬å¯¹åº”çš„ Etag å°±æ˜¯ä¸åŒçš„ï¼Œåä¹‹äº¦ç„¶ã€‚å› æ­¤ Etag èƒ½å¤Ÿç²¾å‡†åœ°æ„ŸçŸ¥æ–‡ä»¶çš„å˜åŒ–ã€‚")]),e._v(" "),t("p",[e._v("Etag å’Œ Last-Modified ç±»ä¼¼ï¼Œå½“é¦–æ¬¡è¯·æ±‚æ—¶ï¼Œæˆ‘ä»¬ä¼šåœ¨å“åº”å¤´é‡Œè·å–åˆ°ä¸€ä¸ªæœ€åˆçš„æ ‡è¯†ç¬¦å­—ç¬¦ä¸²ï¼Œä¸¾ä¸ªğŸŒ°ï¼Œå®ƒå¯ä»¥æ˜¯è¿™æ ·çš„ï¼š")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('ETag: W/"2a3b-1602480f459"\n\n')])])]),t("p",[e._v("é‚£ä¹ˆä¸‹ä¸€æ¬¡è¯·æ±‚æ—¶ï¼Œè¯·æ±‚å¤´é‡Œå°±ä¼šå¸¦ä¸Šä¸€ä¸ªå€¼ç›¸åŒçš„ã€åä¸º if-None-Match çš„å­—ç¬¦ä¸²ä¾›æœåŠ¡ç«¯æ¯”å¯¹äº†ï¼š")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('If-None-Match: W/"2a3b-1602480f459"\n\n')])])]),t("p",[e._v("Etag çš„ç”Ÿæˆè¿‡ç¨‹éœ€è¦æœåŠ¡å™¨é¢å¤–ä»˜å‡ºå¼€é”€ï¼Œä¼šå½±å“æœåŠ¡ç«¯çš„æ€§èƒ½ï¼Œè¿™æ˜¯å®ƒçš„å¼Šç«¯ã€‚å› æ­¤å¯ç”¨ Etag éœ€è¦æˆ‘ä»¬å®¡æ—¶åº¦åŠ¿ã€‚æ­£å¦‚æˆ‘ä»¬åˆšåˆšæ‰€æåˆ°çš„â€”â€”Etag å¹¶ä¸èƒ½æ›¿ä»£ Last-Modifiedï¼Œå®ƒåªèƒ½ä½œä¸º Last-Modified çš„è¡¥å……å’Œå¼ºåŒ–å­˜åœ¨ã€‚ "),t("strong",[e._v("Etag åœ¨æ„ŸçŸ¥æ–‡ä»¶å˜åŒ–ä¸Šæ¯” Last-Modified æ›´åŠ å‡†ç¡®ï¼Œä¼˜å…ˆçº§ä¹Ÿæ›´é«˜ã€‚å½“ Etag å’Œ Last-Modified åŒæ—¶å­˜åœ¨æ—¶ï¼Œä»¥ Etag ä¸ºå‡†ã€‚")])]),e._v(" "),t("h2",{attrs:{id:"http-ç¼“å­˜å†³ç­–æŒ‡å—"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#http-ç¼“å­˜å†³ç­–æŒ‡å—"}},[e._v("#")]),e._v(" HTTP ç¼“å­˜å†³ç­–æŒ‡å—")]),e._v(" "),t("p",[e._v("è¡Œæ–‡è‡³æ­¤ï¼Œå½“ä»£ HTTP ç¼“å­˜æŠ€æœ¯ç”¨åˆ°çš„çŸ¥è¯†ç‚¹ï¼Œæˆ‘ä»¬å·²ç»ä»å¤´åˆ°å°¾æŒ–æ˜äº†ä¸€éäº†ã€‚é‚£ä¹ˆåœ¨é¢å¯¹ä¸€ä¸ªå…·ä½“çš„ç¼“å­˜éœ€æ±‚æ—¶ï¼Œæˆ‘ä»¬åˆ°åº•è¯¥æ€ä¹ˆå†³ç­–å‘¢ï¼Ÿ")]),e._v(" "),t("p",[e._v("èµ°åˆ°å†³ç­–å»ºè®®è¿™ä¸€æ­¥ï¼Œæˆ‘æœ¬æ¥æƒ³ç»™å¤§å®¶é‡æ–°ç”»ä¸€ä¸ªæµç¨‹å›¾ã€‚ä½†æ˜¯ç”»æ¥ç”»å»ç»ˆç©¶ä¸å¦‚ Chrome å®˜æ–¹ç»™å‡ºçš„è¿™å¼ æ¸…æ™°ã€æƒå¨ï¼š")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/9/20/165f701820fafcf8?w=595&h=600&f=png&s=52763",alt:""}})]),e._v(" "),t("p",[e._v("æˆ‘ä»¬ç°åœ¨ä¸€èµ·è§£è¯»ä¸€ä¸‹è¿™å¼ æµç¨‹å›¾ï¼š")]),e._v(" "),t("p",[e._v("å½“æˆ‘ä»¬çš„èµ„æºå†…å®¹ä¸å¯å¤ç”¨æ—¶ï¼Œç›´æ¥ä¸º Cache-Control è®¾ç½® no-storeï¼Œæ‹’ç»ä¸€åˆ‡å½¢å¼çš„ç¼“å­˜ï¼›å¦åˆ™è€ƒè™‘æ˜¯å¦æ¯æ¬¡éƒ½éœ€è¦å‘æœåŠ¡å™¨è¿›è¡Œç¼“å­˜æœ‰æ•ˆç¡®è®¤ï¼Œå¦‚æœéœ€è¦ï¼Œé‚£ä¹ˆè®¾ Cache-Control çš„å€¼ä¸º no-cacheï¼›å¦åˆ™è€ƒè™‘è¯¥èµ„æºæ˜¯å¦å¯ä»¥è¢«ä»£ç†æœåŠ¡å™¨ç¼“å­˜ï¼Œæ ¹æ®å…¶ç»“æœå†³å®šæ˜¯è®¾ç½®ä¸º private è¿˜æ˜¯ publicï¼›ç„¶åè€ƒè™‘è¯¥èµ„æºçš„è¿‡æœŸæ—¶é—´ï¼Œè®¾ç½®å¯¹åº”çš„ max-age å’Œ s-maxage å€¼ï¼›æœ€åï¼Œé…ç½®åå•†ç¼“å­˜éœ€è¦ç”¨åˆ°çš„ Etagã€Last-Modified ç­‰å‚æ•°ã€‚")]),e._v(" "),t("p",[e._v("æˆ‘ä¸ªäººéå¸¸æ¨å´‡è¿™å¼ æµç¨‹å›¾ç»™å‡ºçš„å†³ç­–å»ºè®®ï¼Œä¹Ÿå¼ºçƒˆæ¨èå¤§å®¶åœ¨ç†è§£ä»¥ä¸ŠçŸ¥è¯†ç‚¹çš„åŸºç¡€ä¸Šï¼Œå°†è¿™å¼ å›¾ä¿å­˜ä¸‹æ¥ã€åœ¨æ—¥å¸¸å¼€å‘ä¸­ç”¨ç”¨çœ‹ï¼Œå®ƒçš„å¯è¡Œåº¦éå¸¸é«˜ã€‚")]),e._v(" "),t("p",[e._v("OKï¼Œèµ°åˆ°è¿™é‡Œï¼Œæœ¬èŠ‚æœ€å¤§çš„ä¸€åº§å±±å·²ç»è¢«å¤§å®¶ç¿»è¿‡å»äº†ã€‚æ¥ä¸‹æ¥çš„å†…å®¹ä¼šç›¸å¯¹æ¯”è¾ƒè½»æ¾ï¼Œå¤§å®¶æ”¾æ¾å¿ƒæƒ…ï¼Œæˆ‘ä»¬ç»§ç»­å‰è¡Œï¼")]),e._v(" "),t("h2",{attrs:{id:"memorycache"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#memorycache"}},[e._v("#")]),e._v(" MemoryCache")]),e._v(" "),t("p",[e._v("MemoryCacheï¼Œæ˜¯æŒ‡å­˜åœ¨å†…å­˜ä¸­çš„ç¼“å­˜ã€‚ä»ä¼˜å…ˆçº§ä¸Šæ¥è¯´ï¼Œå®ƒæ˜¯æµè§ˆå™¨æœ€å…ˆå°è¯•å»å‘½ä¸­çš„ä¸€ç§ç¼“å­˜ã€‚ä»æ•ˆç‡ä¸Šæ¥è¯´ï¼Œå®ƒæ˜¯å“åº”é€Ÿåº¦æœ€å¿«çš„ä¸€ç§ç¼“å­˜ã€‚")]),e._v(" "),t("p",[e._v("å†…å­˜ç¼“å­˜æ˜¯å¿«çš„ï¼Œä¹Ÿæ˜¯â€œçŸ­å‘½â€çš„ã€‚å®ƒå’Œæ¸²æŸ“è¿›ç¨‹â€œç”Ÿæ­»ç›¸ä¾â€ï¼Œå½“è¿›ç¨‹ç»“æŸåï¼Œä¹Ÿå°±æ˜¯ tab å…³é—­ä»¥åï¼Œå†…å­˜é‡Œçš„æ•°æ®ä¹Ÿå°†ä¸å¤å­˜åœ¨ã€‚")]),e._v(" "),t("p",[e._v("é‚£ä¹ˆå“ªäº›æ–‡ä»¶ä¼šè¢«æ”¾å…¥å†…å­˜å‘¢ï¼Ÿ")]),e._v(" "),t("p",[e._v("äº‹å®ä¸Šï¼Œè¿™ä¸ªåˆ’åˆ†è§„åˆ™ï¼Œä¸€ç›´ä»¥æ¥æ˜¯æ²¡æœ‰å®šè®ºçš„ã€‚ä¸è¿‡æƒ³æƒ³ä¹Ÿå¯ä»¥ç†è§£ï¼Œå†…å­˜æ˜¯æœ‰é™çš„ï¼Œå¾ˆå¤šæ—¶å€™éœ€è¦å…ˆè€ƒè™‘å³æ—¶å‘ˆç°çš„å†…å­˜ä½™é‡ï¼Œå†æ ¹æ®å…·ä½“çš„æƒ…å†µå†³å®šåˆ†é…ç»™å†…å­˜å’Œç£ç›˜çš„èµ„æºé‡çš„æ¯”é‡â€”â€”èµ„æºå­˜æ”¾çš„ä½ç½®å…·æœ‰ä¸€å®šçš„éšæœºæ€§ã€‚")]),e._v(" "),t("p",[e._v("è™½ç„¶åˆ’åˆ†è§„åˆ™æ²¡æœ‰å®šè®ºï¼Œä½†æ ¹æ®æ—¥å¸¸å¼€å‘ä¸­è§‚å¯Ÿçš„ç»“æœï¼ŒåŒ…æ‹¬æˆ‘ä»¬å¼€ç¯‡ç»™å¤§å®¶å±•ç¤ºçš„ Network æˆªå›¾ï¼Œæˆ‘ä»¬è‡³å°‘å¯ä»¥æ€»ç»“å‡ºè¿™æ ·çš„è§„å¾‹ï¼šèµ„æºå­˜ä¸å­˜å†…å­˜ï¼Œæµè§ˆå™¨ç§‰æ‰¿çš„æ˜¯â€œèŠ‚çº¦åŸåˆ™â€ã€‚æˆ‘ä»¬å‘ç°ï¼ŒBase64 æ ¼å¼çš„å›¾ç‰‡ï¼Œå‡ ä¹æ°¸è¿œå¯ä»¥è¢«å¡è¿› memory cacheï¼Œè¿™å¯ä»¥è§†ä½œæµè§ˆå™¨ä¸ºèŠ‚çœæ¸²æŸ“å¼€é”€çš„â€œè‡ªä¿è¡Œä¸ºâ€ï¼›æ­¤å¤–ï¼Œä½“ç§¯ä¸å¤§çš„ JSã€CSS æ–‡ä»¶ï¼Œä¹Ÿæœ‰è¾ƒå¤§åœ°è¢«å†™å…¥å†…å­˜çš„å‡ ç‡â€”â€”ç›¸æ¯”ä¹‹ä¸‹ï¼Œè¾ƒå¤§çš„ JSã€CSS æ–‡ä»¶å°±æ²¡æœ‰è¿™ä¸ªå¾…é‡äº†ï¼Œå†…å­˜èµ„æºæ˜¯æœ‰é™çš„ï¼Œå®ƒä»¬å¾€å¾€è¢«ç›´æ¥ç”©è¿›ç£ç›˜ã€‚")]),e._v(" "),t("h2",{attrs:{id:"service-worker-cache"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#service-worker-cache"}},[e._v("#")]),e._v(" Service Worker Cache")]),e._v(" "),t("p",[e._v("Service Worker æ˜¯ä¸€ç§ç‹¬ç«‹äºä¸»çº¿ç¨‹ä¹‹å¤–çš„ Javascript çº¿ç¨‹ã€‚å®ƒè„±ç¦»äºæµè§ˆå™¨çª—ä½“ï¼Œå› æ­¤æ— æ³•ç›´æ¥è®¿é—® DOMã€‚è¿™æ ·ç‹¬ç«‹çš„ä¸ªæ€§ä½¿å¾— Service Worker çš„â€œä¸ªäººè¡Œä¸ºâ€æ— æ³•å¹²æ‰°é¡µé¢çš„æ€§èƒ½ï¼Œè¿™ä¸ªâ€œå¹•åå·¥ä½œè€…â€å¯ä»¥å¸®æˆ‘ä»¬å®ç°ç¦»çº¿ç¼“å­˜ã€æ¶ˆæ¯æ¨é€å’Œç½‘ç»œä»£ç†ç­‰åŠŸèƒ½ã€‚æˆ‘ä»¬å€ŸåŠ© Service worker å®ç°çš„ç¦»çº¿ç¼“å­˜å°±ç§°ä¸º Service Worker Cacheã€‚")]),e._v(" "),t("p",[e._v("Service Worker çš„ç”Ÿå‘½å‘¨æœŸåŒ…æ‹¬ installã€activeã€working ä¸‰ä¸ªé˜¶æ®µã€‚ä¸€æ—¦ Service Worker è¢« installï¼Œå®ƒå°†å§‹ç»ˆå­˜åœ¨ï¼Œåªä¼šåœ¨ active ä¸ working ä¹‹é—´åˆ‡æ¢ï¼Œé™¤éæˆ‘ä»¬ä¸»åŠ¨ç»ˆæ­¢å®ƒã€‚è¿™æ˜¯å®ƒå¯ä»¥ç”¨æ¥å®ç°ç¦»çº¿å­˜å‚¨çš„é‡è¦å…ˆå†³æ¡ä»¶ã€‚")]),e._v(" "),t("p",[e._v("ä¸‹é¢æˆ‘ä»¬å°±é€šè¿‡å®æˆ˜çš„æ–¹å¼ï¼Œä¸€èµ·è§è¯†ä¸€ä¸‹ Service Worker å¦‚ä½•ä¸ºæˆ‘ä»¬å®ç°ç¦»çº¿ç¼“å­˜ï¼ˆæ³¨æ„çœ‹æ³¨é‡Šï¼‰ï¼š æˆ‘ä»¬é¦–å…ˆåœ¨å…¥å£æ–‡ä»¶ä¸­æ’å…¥è¿™æ ·ä¸€æ®µ JS ä»£ç ï¼Œç”¨ä»¥åˆ¤æ–­å’Œå¼•å…¥ Service Workerï¼š")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("window.navigator.serviceWorker.register('/test.js').then(\n   function () {\n      console.log('æ³¨å†ŒæˆåŠŸ')\n    }).catch(err => {\n      console.error(\"æ³¨å†Œå¤±è´¥\")\n    })\n\n")])])]),t("p",[e._v("åœ¨ test.js ä¸­ï¼Œæˆ‘ä»¬è¿›è¡Œç¼“å­˜çš„å¤„ç†ã€‚å‡è®¾æˆ‘ä»¬éœ€è¦ç¼“å­˜çš„æ–‡ä»¶åˆ†åˆ«æ˜¯ test.html,test.css å’Œ test.jsï¼š")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("// Service Workerä¼šç›‘å¬ installäº‹ä»¶ï¼Œæˆ‘ä»¬åœ¨å…¶å¯¹åº”çš„å›è°ƒé‡Œå¯ä»¥å®ç°åˆå§‹åŒ–çš„é€»è¾‘  \nself.addEventListener('install', event => {\n  event.waitUntil(\n    // è€ƒè™‘åˆ°ç¼“å­˜ä¹Ÿéœ€è¦æ›´æ–°ï¼Œopenå†…ä¼ å…¥çš„å‚æ•°ä¸ºç¼“å­˜çš„ç‰ˆæœ¬å·\n    caches.open('test-v1').then(cache => {\n      return cache.addAll([\n        // æ­¤å¤„ä¼ å…¥æŒ‡å®šçš„éœ€ç¼“å­˜çš„æ–‡ä»¶å\n        '/test.html',\n        '/test.css',\n        '/test.js'\n      ])\n    })\n  )\n})\n\n// Service Workerä¼šç›‘å¬æ‰€æœ‰çš„ç½‘ç»œè¯·æ±‚ï¼Œç½‘ç»œè¯·æ±‚çš„äº§ç”Ÿè§¦å‘çš„æ˜¯fetchäº‹ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å…¶å¯¹åº”çš„ç›‘å¬å‡½æ•°ä¸­å®ç°å¯¹è¯·æ±‚çš„æ‹¦æˆªï¼Œè¿›è€Œåˆ¤æ–­æ˜¯å¦æœ‰å¯¹åº”åˆ°è¯¥è¯·æ±‚çš„ç¼“å­˜ï¼Œå®ç°ä»Service Workerä¸­å–åˆ°ç¼“å­˜çš„ç›®çš„\nself.addEventListener('fetch', event => {\n  event.respondWith(\n    // å°è¯•åŒ¹é…è¯¥è¯·æ±‚å¯¹åº”çš„ç¼“å­˜å€¼\n    caches.match(event.request).then(res => {\n      // å¦‚æœåŒ¹é…åˆ°äº†ï¼Œè°ƒç”¨Server Workerç¼“å­˜\n      if (res) {\n        return res;\n      }\n      // å¦‚æœæ²¡åŒ¹é…åˆ°ï¼Œå‘æœåŠ¡ç«¯å‘èµ·è¿™ä¸ªèµ„æºè¯·æ±‚\n      return fetch(event.request).then(response => {\n        if (!response || response.status !== 200) {\n          return response;\n        }\n        // è¯·æ±‚æˆåŠŸçš„è¯ï¼Œå°†è¯·æ±‚ç¼“å­˜èµ·æ¥ã€‚\n        caches.open('test-v1').then(function(cache) {\n          cache.put(event.request, response);\n        });\n        return response.clone();\n      });\n    })\n  );\n});\n\n")])])]),t("p",[t("strong",[e._v("PS")]),e._v("ï¼šå¤§å®¶æ³¨æ„ Server Worker å¯¹åè®®æ˜¯æœ‰è¦æ±‚çš„ï¼Œå¿…é¡»ä»¥ https åè®®ä¸ºå‰æã€‚")]),e._v(" "),t("h2",{attrs:{id:"push-cache"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#push-cache"}},[e._v("#")]),e._v(" Push Cache")]),e._v(" "),t("blockquote",[t("p",[e._v("é¢„å‘Šï¼šæœ¬å°èŠ‚å®šä½ä¸ºåŸºç¡€ç§‘æ™®å‘ï¼Œå¯¹ Push Cache æœ‰æ·±å…¥æŒ–æ˜å…´è¶£çš„åŒå­¦ï¼Œå¼ºçƒˆæ¨èæ‹“å±•é˜…è¯» Chrome å·¥ç¨‹å¸ˆ Jake Archibald çš„è¿™ç¯‡ "),t("a",{attrs:{href:"https://jakearchibald.com/2017/h2-push-tougher-than-i-thought/",target:"_blank",rel:"noopener noreferrer"}},[e._v("HTTP/2 push is tougher than I thought"),t("OutboundLink")],1),e._v("ã€‚")])]),e._v(" "),t("p",[e._v("Push Cache æ˜¯æŒ‡ HTTP2 åœ¨ server push é˜¶æ®µå­˜åœ¨çš„ç¼“å­˜ã€‚è¿™å—çš„çŸ¥è¯†æ¯”è¾ƒæ–°ï¼Œåº”ç”¨ä¹Ÿè¿˜å¤„äºèŒèŠ½é˜¶æ®µï¼Œæˆ‘æ‰¾äº†å¥½å‡ ä¸ªç½‘ç«™ä¹Ÿæ²¡æ‰¾åˆ°ä¸€ä¸ªåˆé€‚çš„æ¡ˆä¾‹æ¥ç»™å¤§å®¶åšå…·ä½“çš„ä»‹ç»ã€‚ä½†åº”ç”¨èŒƒå›´æœ‰é™ä¸ä»£è¡¨ä¸é‡è¦â€”â€”HTTP2 æ˜¯è¶‹åŠ¿ã€æ˜¯æœªæ¥ã€‚åœ¨å®ƒè¿˜æœªè¢«æ¨è€Œå¹¿ä¹‹çš„æ­¤æ—¶æ­¤åˆ»ï¼Œæˆ‘ä»å¸Œæœ›å¤§å®¶èƒ½å¯¹ Push Cache çš„å…³é”®ç‰¹æ€§æœ‰æ‰€äº†è§£ï¼š")]),e._v(" "),t("ul",[t("li",[e._v("Push Cache æ˜¯ç¼“å­˜çš„æœ€åä¸€é“é˜²çº¿ã€‚æµè§ˆå™¨åªæœ‰åœ¨ Memory Cacheã€HTTP Cache å’Œ Service Worker Cache å‡æœªå‘½ä¸­çš„æƒ…å†µä¸‹æ‰ä¼šå»è¯¢é—® Push Cacheã€‚")]),e._v(" "),t("li",[e._v("Push Cache æ˜¯ä¸€ç§å­˜åœ¨äºä¼šè¯é˜¶æ®µçš„ç¼“å­˜ï¼Œå½“ session ç»ˆæ­¢æ—¶ï¼Œç¼“å­˜ä¹Ÿéšä¹‹é‡Šæ”¾ã€‚")]),e._v(" "),t("li",[e._v("ä¸åŒçš„é¡µé¢åªè¦å…±äº«äº†åŒä¸€ä¸ª HTTP2 è¿æ¥ï¼Œé‚£ä¹ˆå®ƒä»¬å°±å¯ä»¥å…±äº«åŒä¸€ä¸ª Push Cacheã€‚")])]),e._v(" "),t("p",[e._v("æ›´å¤šçš„ç‰¹æ€§å’Œåº”ç”¨ï¼ŒæœŸå¾…å¤§å®¶å¯ä»¥åœ¨æ—¥åçš„å¼€å‘è¿‡ç¨‹ä¸­å»æŒ–æ˜å’Œå®è·µã€‚")]),e._v(" "),t("h2",{attrs:{id:"å°ç»“"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å°ç»“"}},[e._v("#")]),e._v(" å°ç»“")]),e._v(" "),t("p",[e._v("å°å»ºè®®ï¼å¾ˆå¤šåŒå­¦åœ¨å­¦ä¹ ç¼“å­˜è¿™å—çŸ¥è¯†çš„æ—¶å€™å¯èƒ½å¤šå°‘ä¼šæœ‰è¿™æ ·çš„æ„Ÿè§‰ï¼šå¯¹æµè§ˆå™¨ç¼“å­˜ï¼Œåªèƒ½æè¿°ä¸ªå¤§è‡´ï¼Œå´è¯´ä¸ä¸Šæ·±å±‚åŸç†ï¼›å¥½ä¸å®¹æ˜“è®°ä½äº†æ¯ä¸ªå­—æ®µæ€ä¹ˆç”¨ï¼Œè¿‡å‡ å¤©åˆç»™å¿˜äº†ã€‚è¿™æ˜¯å› ä¸ºç¼“å­˜éƒ¨åˆ†çš„çŸ¥è¯†ï¼Œå…·æœ‰â€œç»†ç¢ã€è¿­ä»£å¿«â€çš„ç‰¹ç‚¹ã€‚å¯¹äºè¿™æ ·çš„çŸ¥è¯†ï¼Œæˆ‘ä»¬åº”è¯¥å°è¯•å…ˆåˆ’åˆ†å‡ºå±‚æ¬¡å’Œé‡ç‚¹ï¼Œå½’çº³å‡ºå®Œæ•´çš„ä½“ç³»ï¼Œç„¶åé’ˆå¯¹æ¯ä¸ªçŸ¥è¯†ç‚¹å»å„ä¸ªå‡»ç ´ã€‚")]),e._v(" "),t("p",[e._v("ç»ˆäºç»“æŸäº†å¯¹ç¼“å­˜ä¸–ç•Œçš„æ¢ç´¢ï¼Œä¸çŸ¥é“å¤§å®¶æœ‰æ²¡æœ‰ä¸€ç§æ„çŠ¹æœªå°½çš„æ„Ÿè§‰ã€‚å¼€ç¯‡æˆ‘ä»¬è°ˆè¿‡ï¼Œç¼“å­˜éå¸¸é‡è¦ï¼Œå®ƒå‡ ä¹æ˜¯æˆ‘ä»¬æ€§èƒ½ä¼˜åŒ–çš„é¦–é€‰æ–¹æ¡ˆã€‚")]),e._v(" "),t("p",[e._v("ä½†é¡µé¢çš„æ•°æ®å­˜å‚¨æ–¹æ¡ˆé™¤äº†ç¼“å­˜ï¼Œè¿˜æœ‰æœ¬åœ°å­˜å‚¨ã€‚åœ¨ä¸‹ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°±å°†å›´ç»•æœ¬åœ°å­˜å‚¨å±•å¼€æ¢ç´¢ã€‚")])])}),[],!1,null,null,null);a.default=s.exports}}]);